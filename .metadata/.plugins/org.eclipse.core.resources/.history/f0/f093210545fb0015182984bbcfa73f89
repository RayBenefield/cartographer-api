package com.cartographerapi.customgames;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.JsonNode;
import java.io.IOException;

public class PlayerGameCountsHaloApiReader implements PlayerGameCountsReader {

	Halo5ApiWrapper api = new Halo5ApiWrapper("ae4df7c91357455ea30be2d7bdf15522");
	ObjectMapper mapper = new ObjectMapper();
	
	public PlayerGameCountsHaloApiReader() {
	}

	@Override
	public PlayerGameCounts getPlayerGameCountsByGamertag(String gamertag) {
		try {
			JsonNode root;
			String totalResult = api.serviceRecord(gamertag);
			root = mapper.readTree(totalResult);
			Integer completedGames = root.path("Results").path(0).path("Result").path("CustomStats").path("TotalGamesCompleted").asInt();
			Integer totalGames = completedGames;
		} catch (IOException exception) {
			return new PlayerGameCounts(gamertag, 0, 0);
		}
		// TODO Auto-generated method stub
		return null;
	}

}
