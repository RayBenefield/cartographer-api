package com.cartographerapi.customgames;

import com.amazonaws.services.lambda.runtime.Context;
import com.amazonaws.services.lambda.runtime.RequestHandler;
import java.util.Properties;
import java.io.InputStream;
import java.io.IOException;

public class CustomGameCountHandler implements RequestHandler<Gamertag, Integer> {
	
    @Override
    public Integer handleRequest(Gamertag input, Context context) {
        context.getLogger().log("Input: " + input.getGamertag());
//        Properties prop = new Properties();
//        InputStream inputStream = this.getClass().getClassLoader().getResourceAsStream("halo-api.properties");
//        
//        try {
//			if (inputStream != null) {
//				prop.load(inputStream);
//			}
//        } catch (IOException exception) {
//        	return 0;
//        }
        
        try {
//			Halo5ApiWrapper api = new Halo5ApiWrapper(prop.getProperty("token"));
			Halo5ApiWrapper api = new Halo5ApiWrapper("ae4df7c91357455ea30be2d7bdf15522");
//			String result = api.serviceRecord(input.getGamertag());
			return input.getGamertag().length();
        } catch (IOException exception) {
        	return 1;
        }

    }

}